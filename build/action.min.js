"use strict";Shuang.app.action={init:function c(){var b=this;function a(a,b,c){b.forEach(function(b){var c=document.createElement("option");c.innerText=b,a.appendChild(c)}),a.onchange=function(a){c(a.target.value)}}a($("#scheme-select"),Object.values(Shuang.resource.schemeList),function(a){Shuang.app.setting.setScheme(a)}),a($("#mode-select"),Object.values(Shuang.app.modeList).map(function(a){return a.name}),function(a){Shuang.app.setting.setMode(a),b.next()}),Shuang.core.current=new Shuang.core.model("sh","uang"),$("#q").innerHTML=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerHTML=Shuang.core.current.dict,Shuang.app.setting.reload(),document.addEventListener("keydown",function(a){[27,9,13,32].includes(a.keyCode)&&a.preventDefault()}),document.addEventListener("keyup",function(a){b.keyPressed(a)}),$("#pic-switcher").onchange=function(a){Shuang.app.setting.setPicVisible(a.target.checked)}},keyPressed:function a(b){var c=$("#a");switch(b.keyCode){case 27:this.redo();break;case 9:Shuang.core.current.beforeJudge(),c.value=Shuang.core.current.scheme.values().next().value,this.judge();break;case 13:case 32:this.judge()?this.next():this.redo();break;default:c.value=c.value.slice(0,2).replace(/[^a-zA-Z;]/g,""),this.judge();}},judge:function f(){var a=this,b=$("#a"),c=b.value[0],d=b.value[1],e=$("#btn");return d&&Shuang.core.current.judge(c,d)?(e.onclick=function(){a.next()},e.innerText="\u2714\uFE0F",!0):(e.onclick=function(){a.redo()},e.innerText="\u274C",!1)},redo:function d(){var a=this,b=$("#a"),c=$("#btn");b.value="",b.focus(),c.onclick=function(){a.redo()},c.innerText="\u274C"},next:function a(){switch(this.redo(),Shuang.app.setting.config.mode){case"all-random":Shuang.core.current=Shuang.core.model.getRandom();break;case"all-order":Shuang.core.current=Shuang.core.model.getByOrder();break;case"hard-random":Shuang.core.current=Shuang.core.model.getHardRandom();break;case"hard-random-without-pinyin":do Shuang.core.current=Shuang.core.model.getHardRandom();while(Array.isArray(Shuang.core.current.dict));}Shuang.core.history.includes(Shuang.core.current.sheng+Shuang.core.current.yun)?this.next():Shuang.core.history=Shuang.core.history.concat([Shuang.core.current.sheng+Shuang.core.current.yun]).slice(-100),$("#q").innerHTML=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerHTML=Shuang.core.current.dict},qrShow:function b(a){$("#"+a).hidden=""},qrHide:function b(a){a.hidden="hidden"}};